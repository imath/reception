{"version":3,"sources":["../node_modules/@babel/runtime/helpers/classCallCheck.js","../node_modules/@babel/runtime/helpers/createClass.js","../node_modules/@babel/runtime/helpers/setPrototypeOf.js","../node_modules/@babel/runtime/helpers/inherits.js","../node_modules/@babel/runtime/helpers/typeof.js","../node_modules/@babel/runtime/helpers/assertThisInitialized.js","../node_modules/@babel/runtime/helpers/possibleConstructorReturn.js","../node_modules/@babel/runtime/helpers/getPrototypeOf.js","scripts/member-bio.js"],"names":["wp","element","Component","render","createElement","Fragment","__","i18n","RichText","blockEditor","Button","components","apiFetch","MemberBio","arguments","state","description","loaded","previousDescription","path","method","then","user","setState","e","preventDefault","data","text","saveDescription","document","querySelector"],"mappings":"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","file":"member-bio.js","sourceRoot":"../src","sourcesContent":["function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck;","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nmodule.exports = _createClass;","function _setPrototypeOf(o, p) {\n  module.exports = _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nmodule.exports = _setPrototypeOf;","var setPrototypeOf = require(\"./setPrototypeOf\");\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}\n\nmodule.exports = _inherits;","function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    module.exports = _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    module.exports = _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nmodule.exports = _typeof;","function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nmodule.exports = _assertThisInitialized;","var _typeof = require(\"../helpers/typeof\");\n\nvar assertThisInitialized = require(\"./assertThisInitialized\");\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}\n\nmodule.exports = _possibleConstructorReturn;","function _getPrototypeOf(o) {\n  module.exports = _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nmodule.exports = _getPrototypeOf;","/**\n * WordPress dependencies.\n */\nconst { Component, render, createElement, Fragment } = wp.element;\nconst { __ } = wp.i18n;\nconst { RichText } = wp.blockEditor;\nconst { Button } = wp.components;\nconst { apiFetch } = wp;\n\nclass MemberBio extends Component {\n\tconstructor() {\n\t\tsuper( ...arguments );\n\n\t\tthis.state = {\n\t\t\tdescription: '',\n\t\t\tloaded: false,\n\t\t\tpreviousDescription: '',\n\t\t};\n\t}\n\n\tcomponentDidMount() {\n\t\tconst { loaded } = this.state;\n\n\t\tif ( ! loaded ) {\n\t\t\tapiFetch( {\n\t\t\t\tpath: '/wp/v2/users/me?context=edit',\n\t\t\t\tmethod: 'GET'\n\t\t\t} ).then( ( user ) => {\n\t\t\t\tif ( user && user.description ) {\n\t\t\t\t\tconst description = '<p>' + user.description + '</p>';\n\t\t\t\t\tthis.setState( {\n\t\t\t\t\t\tdescription: description,\n\t\t\t\t\t\tpreviousDescription: description,\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\tthis.setState( { loaded: true } );\n\t\t}\n\t}\n\n\tsaveDescription( e ) {\n\t\te.preventDefault();\n\n\t\tconst { description } = this.state;\n\n\t\tapiFetch( {\n\t\t\tpath: '/wp/v2/users/me?context=edit',\n\t\t\tmethod: 'PUT',\n\t\t\tdata: { description: description }\n\t\t} ).then( ( user ) => {\n\t\t\tif ( user && user.description ) {\n\t\t\t\tconst description = '<p>' + user.description + '</p>';\n\t\t\t\tthis.setState( {\n\t\t\t\t\tpreviousDescription: description,\n\t\t\t\t} );\n\t\t\t}\n\t\t} );\n\t}\n\n\trender() {\n\t\tconst { description, previousDescription } = this.state;\n\n\t\treturn(\n\t\t\t<Fragment>\n\t\t\t\t<RichText\n\t\t\t\t\tvalue={ description }\n\t\t\t\t\tonChange={ ( text ) => this.setState( { description: text } ) }\n\t\t\t\t\tplaceholder={ __( 'Utiliser cette zone pour personnaliser votre présentation', 'reception' ) }\n\t\t\t\t\tmultiline={ true }\n\t\t\t\t/>\n\n\t\t\t\t{ previousDescription !== description && (\n\t\t\t\t\t<Button\n\t\t\t\t\t\tisPrimary={ true }\n\t\t\t\t\t\tonClick={ ( e ) => this.saveDescription( e ) }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ __( 'Enregistrer', 'reception' ) }\n\t\t\t\t\t</Button>\n\t\t\t\t) }\n\t\t\t</Fragment>\n\t\t);\n\t}\n}\nrender( <MemberBio />, document.querySelector( '.reception-block-member-bio.dynamic' ) );\n"]}