{"version":3,"sources":["../node_modules/@babel/runtime/helpers/classCallCheck.js","../node_modules/@babel/runtime/helpers/createClass.js","../node_modules/@babel/runtime/helpers/assertThisInitialized.js","../node_modules/@babel/runtime/helpers/setPrototypeOf.js","../node_modules/@babel/runtime/helpers/inherits.js","../node_modules/@babel/runtime/helpers/typeof.js","../node_modules/@babel/runtime/helpers/possibleConstructorReturn.js","../node_modules/@babel/runtime/helpers/getPrototypeOf.js","scripts/member-contact-form.js"],"names":["wp","element","Component","render","createElement","Fragment","__","i18n","RichText","blockEditor","components","Button","TextControl","Modal","Snackbar","SelectControl","Notice","apiFetch","isEmail","url","MemberContactForm","arguments","state","name","email","message","confirmationCode","displayUserId","loggedInUserId","resultMessage","needsValidation","checked","sending","verifiedEmail","isEditorOpen","feedback","situations","situation","needsContent","modalTitle","modalAction","closeEmailEditor","bind","sendValidationCode","checkValidationCode","isSelfProfile","isUserLoggedIn","window","receptionMemberContactForm","parseInt","setState","JSON","parse","customModalTitle","customModalAction","forEach","availableSituation","value","needs_content","label","action","e","preventDefault","path","method","then","updatedFeedback","spam","id","confirmed","data","member_id","code","emailData","current_user","response","emailInputs","labelEmailInput","labelNameInput","labelCancelButton","length","setSituation","openEmailEditor","text","sendEmail","document","querySelector"],"mappings":"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","file":"member-contact-form.js","sourceRoot":"../src","sourcesContent":["function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck;","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nmodule.exports = _createClass;","function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nmodule.exports = _assertThisInitialized;","function _setPrototypeOf(o, p) {\n  module.exports = _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nmodule.exports = _setPrototypeOf;","var setPrototypeOf = require(\"./setPrototypeOf\");\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}\n\nmodule.exports = _inherits;","function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    module.exports = _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    module.exports = _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nmodule.exports = _typeof;","var _typeof = require(\"../helpers/typeof\");\n\nvar assertThisInitialized = require(\"./assertThisInitialized\");\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}\n\nmodule.exports = _possibleConstructorReturn;","function _getPrototypeOf(o) {\n  module.exports = _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nmodule.exports = _getPrototypeOf;","/**\n * WordPress dependencies.\n */\nconst { Component, render, createElement, Fragment } = wp.element;\nconst { __ } = wp.i18n;\nconst { RichText } = wp.blockEditor;\nconst { Button, TextControl, Modal, Snackbar, SelectControl, Notice } = wp.components;\nconst { apiFetch } = wp;\nconst { isEmail } = wp.url;\n\nclass MemberContactForm extends Component {\n\tconstructor() {\n\t\tsuper( ...arguments );\n\n\t\tthis.state = {\n\t\t\tname: '',\n\t\t\temail: '',\n\t\t\tmessage: '',\n\t\t\tconfirmationCode: '',\n\t\t\tdisplayUserId: 0,\n\t\t\tloggedInUserId: 0,\n\t\t\tresultMessage: '',\n\t\t\tneedsValidation: false,\n\t\t\tchecked: false,\n\t\t\tsending: false,\n\t\t\tverifiedEmail: {},\n\t\t\tisEditorOpen: false,\n\t\t\tfeedback: [],\n\t\t\tsituations: [],\n\t\t\tsituation: 'reception-contact-member',\n\t\t\tneedsContent: true,\n\t\t\tmodalTitle: __( 'Envoyer un message', 'reception' ),\n\t\t\tmodalAction: __( 'Envoyer', 'reception' ),\n\t\t};\n\n\t\tthis.closeEmailEditor = this.closeEmailEditor.bind( this );\n\t\tthis.sendValidationCode = this.sendValidationCode.bind( this );\n\t\tthis.checkValidationCode = this.checkValidationCode.bind( this );\n\t\tthis.isSelfProfile = false;\n\t\tthis.isUserLoggedIn = false;\n\t}\n\n\tcomponentDidMount() {\n\t\tlet { displayUserId, loggedInUserId } = this.state;\n\n\t\tif ( window.receptionMemberContactForm ) {\n\t\t\tif ( window.receptionMemberContactForm.displayUserId ) {\n\t\t\t\tdisplayUserId = parseInt( window.receptionMemberContactForm.displayUserId, 10 );\n\t\t\t\tthis.setState( { displayUserId: displayUserId } );\n\t\t\t}\n\n\t\t\tif ( window.receptionMemberContactForm.loggedInUserId ) {\n\t\t\t\tloggedInUserId = parseInt( window.receptionMemberContactForm.loggedInUserId, 10 );\n\t\t\t\tthis.setState( { loggedInUserId: loggedInUserId } );\n\t\t\t}\n\n\t\t\tif ( window.receptionMemberContactForm.name ) {\n\t\t\t\tthis.setState( { name: window.receptionMemberContactForm.name } );\n\t\t\t}\n\n\t\t\tif ( window.receptionMemberContactForm.email ) {\n\t\t\t\tthis.setState( { email: window.receptionMemberContactForm.email } );\n\t\t\t}\n\n\t\t\tif ( window.receptionMemberContactForm.situations ) {\n\t\t\t\tthis.setState( { situations: JSON.parse( window.receptionMemberContactForm.situations ) } );\n\t\t\t}\n\t\t}\n\n\t\tthis.isUserLoggedIn = loggedInUserId && 0 !== loggedInUserId;\n\t\tthis.isSelfProfile  = this.isUserLoggedIn && displayUserId === loggedInUserId;\n\t}\n\n\tsetSituation( situation ) {\n\t\tconst { situations, modalTitle, modalAction } = this.state;\n\t\tlet needsContent = true, customModalTitle = modalTitle, customModalAction = modalAction;\n\n\t\tsituations.forEach( ( availableSituation ) => {\n\t\t\tif ( situation === availableSituation.value ) {\n\t\t\t\tif( ! availableSituation.needs_content || false === availableSituation.needs_content ) {\n\t\t\t\t\tneedsContent = false;\n\t\t\t\t}\n\n\t\t\t\tif ( availableSituation.label ) {\n\t\t\t\t\tcustomModalTitle = availableSituation.label;\n\t\t\t\t}\n\n\t\t\t\tif ( !! availableSituation.action ) {\n\t\t\t\t\tcustomModalAction = availableSituation.action;\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\n\t\tthis.setState( {\n\t\t\tsituation: situation,\n\t\t\tneedsContent: needsContent,\n\t\t\tmodalTitle: customModalTitle,\n\t\t\tmodalAction: customModalAction,\n\t\t} );\n\t}\n\n\topenEmailEditor( e ) {\n\t\te.preventDefault();\n\n\t\tconst { name, email, checked } = this.state;\n\t\tthis.setState( { isEditorOpen: true } );\n\n\t\tif ( ! this.isUserLoggedIn || this.isSelfProfile ) {\n\t\t\tif ( ! name ) {\n\t\t\t\tthis.setState( { feedback: [\n\t\t\t\t\t( <Notice key=\"missing-name\" status=\"error\" isDismissible={ false }>{ __( 'Merci de renseigner un prénom et un nom.', 'reception' ) }</Notice> ),\n\t\t\t\t] } );\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( ! isEmail( email ) ) {\n\t\t\t\tthis.setState( { feedback: [\n\t\t\t\t\t( <Notice key=\"missing-email\" status=\"error\" isDismissible={ false }>{ __( 'Merci de renseigner un e-mail valide.', 'reception' ) }</Notice> ),\n\t\t\t\t] } );\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( ! checked ) {\n\t\t\t\tthis.setState( { feedback: [\n\t\t\t\t\t( <Notice key=\"checking-email\" status=\"info\" isDismissible={ false }>{ __( 'Vérification de votre e-mail. merci de patienter.', 'reception' ) }</Notice> ),\n\t\t\t\t] } );\n\n\t\t\t\tapiFetch( {\n\t\t\t\t\tpath: '/reception/v1/email/check/' + email,\n\t\t\t\t\tmethod: 'GET'\n\t\t\t\t} ).then( ( verifiedEmail ) => {\n\t\t\t\t\tlet updatedFeedback = [];\n\n\t\t\t\t\tif ( this.isSelfProfile ) {\n\t\t\t\t\t\tif ( true === verifiedEmail.spam ) {\n\t\t\t\t\t\t\tupdatedFeedback = [ (\n\t\t\t\t\t\t\t\t<Notice key=\"reception-spam\" status=\"error\" isDismissible={ false }>{ __( 'Désolé, l’e-mail du visiteur a été marqué comme indésirable : vous ne pouvez pas utiliser le site pour le contacter.', 'reception' ) }</Notice>\n\t\t\t\t\t\t\t) ];\n\t\t\t\t\t\t} else if ( ! verifiedEmail.id || ! verifiedEmail.confirmed ) {\n\t\t\t\t\t\t\tupdatedFeedback = [ (\n\t\t\t\t\t\t\t\t<Notice key=\"reception-not-verified\" status=\"error\" isDismissible={ false }>{ __( 'L‘email du visisteur que vous souhaitez contacter n’a pas été vérifié, merci de lui demander de le faire ou de le contacter directement.', 'reception' ) }</Notice>\n\t\t\t\t\t\t\t) ];\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif ( true === verifiedEmail.spam ) {\n\t\t\t\t\t\t\tupdatedFeedback = [ (\n\t\t\t\t\t\t\t\t<Notice key=\"reception-spam\" status=\"error\" isDismissible={ false }>{ __( 'Désolé, votre e-mail a été marqué comme indésirable : vous ne pouvez pas contacter ce membre.', 'reception' ) }</Notice>\n\t\t\t\t\t\t\t) ];\n\t\t\t\t\t\t} else if ( ! verifiedEmail.id ) {\n\t\t\t\t\t\t\tupdatedFeedback = [ (\n\t\t\t\t\t\t\t\t<Fragment key=\"reception-unverified\">\n\t\t\t\t\t\t\t\t\t<Notice status=\"warning\" isDismissible={ false }>{ __( 'Votre e-mail a besoin d’être validé, cette étape de validation est nécessaire afin de garantir à nos membres qu’ils ne recevront pas de messages indésirables.', 'reception' ) }</Notice>\n\t\t\t\t\t\t\t\t\t<p className=\"reception-help description\">{ __( 'Merci de cliquer sur le bouton « Obtenir le code de validation » afin de recevoir un e-mail le contenant dans les prochaines minutes.', 'reception' ) }</p>\n\t\t\t\t\t\t\t\t\t<p className=\"reception-help description\">{ __( 'Dés que vous l’aurez reçu, vous pourrez revenir sur cette page afin de l’utiliser pour déverrouiller cette sécurité et contacter ce membre. Merci de votre compréhension.', 'reception' ) }</p>\n\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\tisPrimary={ true }\n\t\t\t\t\t\t\t\t\t\tonClick={ ( e ) => this.sendValidationCode( e ) }\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{ __( 'Obtenir le code de validation', 'reception' ) }\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t\t\t) ];\n\t\t\t\t\t\t} else if ( ! verifiedEmail.confirmed ) {\n\t\t\t\t\t\t\tupdatedFeedback = [ (\n\t\t\t\t\t\t\t\t<Notice key=\"reception-do-verify\" status=\"info\" isDismissible={ false }>{ __( 'Le code de validation associé à votre e-mail a besoin d’être vérifié, Merci de copier le code de validation que vous avez reçu dans le champ ci-dessous avant de lancer la vérification.', 'reception' ) }</Notice>\n\t\t\t\t\t\t\t) ];\n\n\t\t\t\t\t\t\tthis.setState( { needsValidation: true } );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.setState( {\n\t\t\t\t\t\tfeedback: updatedFeedback,\n\t\t\t\t\t\tverifiedEmail: verifiedEmail,\n\t\t\t\t\t} );\n\t\t\t\t} );\n\n\t\t\t\tthis.setState( { checked: true } );\n\t\t\t}\n\t\t}\n\t}\n\n\tcloseEmailEditor() {\n\t\tthis.setState( {\n\t\t\tisEditorOpen: false,\n\t\t\tfeedback: [],\n\t\t\tchecked: false,\n\t\t} );\n\t}\n\n\tsendValidationCode( e ) {\n\t\te.preventDefault();\n\n\t\tconst { name, email, displayUserId } = this.state;\n\n\t\tapiFetch( {\n\t\t\tpath: '/reception/v1/email',\n\t\t\tmethod: 'POST',\n\t\t\tdata: {\n\t\t\t\tname: name,\n\t\t\t\temail: email,\n\t\t\t\tmember_id: displayUserId,\n\t\t\t}\n\t\t} ).then( ( verifiedEmail ) => {\n\t\t\tthis.setState( {\n\t\t\t\tresultMessage: __( 'L’e-mail contenant le code de validation vous a bien été transmis', 'reception' ),\n\t\t\t\tverifiedEmail: verifiedEmail,\n\t\t\t} );\n\t\t}, () => {\n\t\t\tthis.setState( {\n\t\t\t\tresultMessage: __( 'Désolé, une erreur a empêché l’envoi de s’effectuer.', 'reception' ),\n\t\t\t} );\n\t\t} );\n\n\t\tthis.closeEmailEditor();\n\t}\n\n\tcheckValidationCode( e ) {\n\t\te.preventDefault();\n\n\t\tconst { email, confirmationCode } = this.state;\n\n\t\tapiFetch( {\n\t\t\tpath: '/reception/v1/email/validate/' + email,\n\t\t\tmethod: 'PUT',\n\t\t\tdata: {\n\t\t\t\tcode: confirmationCode,\n\t\t\t}\n\t\t} ).then( ( verifiedEmail ) => {\n\t\t\tthis.setState( {\n\t\t\t\tresultMessage: __( 'Merci d’avoir validé votre e-mail. Vous pouvez poursuivre la rédaction de votre message', 'reception' ),\n\t\t\t\tverifiedEmail: verifiedEmail,\n\t\t\t\tneedsValidation: false,\n\t\t\t} );\n\t\t}, () => {\n\t\t\tthis.setState( {\n\t\t\t\tresultMessage: __( 'Désolé, la validation de votre e-mail a échoué.', 'reception' ),\n\t\t\t\tconfirmationCode: '',\n\t\t\t} );\n\t\t} );\n\n\t\tthis.closeEmailEditor();\n\t}\n\n\tsendEmail( e ) {\n\t\te.preventDefault();\n\n\t\tconst { name, email, message, displayUserId, loggedInUserId, situation, needsContent, sending } = this.state;\n\t\tlet emailData = {\n\t\t\tname: name,\n\t\t\temail: email,\n\t\t\tmessage: message,\n\t\t};\n\n\t\tif ( loggedInUserId && ! this.isSelfProfile ) {\n\t\t\temailData.current_user = loggedInUserId;\n\t\t}\n\n\t\tif ( 'reception-contact-member' !== situation ) {\n\t\t\temailData.situation = situation;\n\n\t\t\tif ( ! needsContent ) {\n\t\t\t\temailData.message = situation;\n\t\t\t}\n\t\t}\n\n\t\tif ( ! emailData.message ) {\n\t\t\tthis.setState( {\n\t\t\t\tresultMessage: __( 'Merci d’ajouter du texte à votre e-mail.', 'reception' ),\n\t\t\t\tmessage: '',\n\t\t\t\tsending: false,\n\t\t\t} );\n\n\t\t\tthis.closeEmailEditor();\n\t\t\treturn;\n\t\t}\n\n\t\tif ( ! sending ) {\n\t\t\tthis.setState( { sending: true } );\n\n\t\t\tapiFetch( {\n\t\t\t\tpath: '/reception/v1/email/send/' + displayUserId,\n\t\t\t\tmethod: 'POST',\n\t\t\t\tdata: emailData,\n\t\t\t} ).then( ( response ) => {\n\t\t\t\tthis.setState( {\n\t\t\t\t\tresultMessage: __( 'Votre e-mail a bien été transmis.', 'reception' ),\n\t\t\t\t\tverifiedEmail: response.verifiedEmail,\n\t\t\t\t\tmessage: '',\n\t\t\t\t\tsending: false,\n\t\t\t\t} );\n\t\t\t}, () => {\n\t\t\t\tthis.setState( {\n\t\t\t\t\tresultMessage: __( 'Désolé, l’envoi de votre e-mail a échoué.', 'reception' ),\n\t\t\t\t\tmessage: '',\n\t\t\t\t\tsending: false,\n\t\t\t\t} );\n\t\t\t} );\n\t\t}\n\n\t\tthis.closeEmailEditor();\n\t}\n\n\trender() {\n\t\tconst {\n\t\t\tdisplayUserId,\n\t\t\tloggedInUserId,\n\t\t\tname,\n\t\t\temail,\n\t\t\tisEditorOpen,\n\t\t\tfeedback,\n\t\t\tresultMessage,\n\t\t\tconfirmationCode,\n\t\t\tneedsValidation,\n\t\t\tmessage,\n\t\t\tsituations,\n\t\t\tsituation,\n\t\t\tneedsContent,\n\t\t\tmodalTitle,\n\t\t\tmodalAction,\n\t\t} = this.state;\n\t\tconst labelEmailInput = displayUserId && this.isSelfProfile ? __( 'E-mail du destinataire (obligatoire)', 'reception' ) : __( 'Votre e-mail (obligatoire)', 'reception' );\n\t\tconst labelNameInput = displayUserId && this.isSelfProfile ? __( 'Prénom et nom du destinataire (obligatoire)', 'reception' ) : __( 'Vos prénom et nom (obligatoire)', 'reception' );\n\t\tconst labelCancelButton = 0 !== feedback.length ? __( 'Fermer', 'reception' ) : __( 'Annuler', 'reception' );\n\t\tlet emailInputs;\n\n\t\tif ( ! this.isUserLoggedIn || this.isSelfProfile ) {\n\t\t\temailInputs = (\n\t\t\t\t<Fragment>\n\t\t\t\t\t<TextControl\n\t\t\t\t\t\tlabel={ labelNameInput }\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tvalue={ name }\n\t\t\t\t\t\tonChange={ ( name ) => this.setState( { name: name } ) }\n\t\t\t\t\t\trequired={ true }\n\t\t\t\t\t/>\n\t\t\t\t\t<TextControl\n\t\t\t\t\t\tlabel={ labelEmailInput }\n\t\t\t\t\t\ttype=\"email\"\n\t\t\t\t\t\tvalue={ email }\n\t\t\t\t\t\tonChange={ ( email ) => this.setState( { email: email } ) }\n\t\t\t\t\t\trequired={ true }\n\t\t\t\t\t/>\n\t\t\t\t\t{ 0 !== situations.length && 0 === loggedInUserId && (\n\t\t\t\t\t\t<SelectControl\n\t\t\t\t\t\t\tlabel={ __( 'Motif de votre contact', 'reception' ) }\n\t\t\t\t\t\t\tvalue={ situation }\n\t\t\t\t\t\t\toptions={ situations }\n\t\t\t\t\t\t\tonChange={ ( situation ) => this.setSituation( situation ) }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t</Fragment>\n\t\t\t);\n\t\t}\n\n\t\treturn(\n\t\t\t<Fragment>\n\t\t\t\t{ emailInputs }\n\t\t\t\t<Button\n\t\t\t\t\tisPrimary={ true }\n\t\t\t\t\tonClick={ ( e ) => this.openEmailEditor( e ) }\n\t\t\t\t>\n\t\t\t\t\t{ __( 'Rédiger votre message', 'reception' ) }\n\t\t\t\t</Button>\n\t\t\t\t{ '' !== resultMessage &&\n\t\t\t\t\t<Snackbar onRemove={ () => this.setState( { resultMessage: '' } ) }>\n\t\t\t\t\t\t{ resultMessage }\n\t\t\t\t\t</Snackbar>\n\t\t\t\t}\n\t\t\t\t{ isEditorOpen && (\n\t\t\t\t\t<Modal title={ modalTitle } onRequestClose={ this.closeEmailEditor } className=\"reception-contact-form-modal\">\n\t\t\t\t\t\t<div className=\"reception-modal-content\">\n\t\t\t\t\t\t\t{ feedback }\n\t\t\t\t\t\t\t{ 0 === feedback.length && (\n\t\t\t\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t\t\t\t{ true === needsContent && (\n\t\t\t\t\t\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t\t\t\t\t\t<h2>{ __( 'Votre message', 'reception' ) }</h2>\n\t\t\t\t\t\t\t\t\t\t\t<RichText\n\t\t\t\t\t\t\t\t\t\t\t\tvalue={ message }\n\t\t\t\t\t\t\t\t\t\t\t\ttagName=\"p\"\n\t\t\t\t\t\t\t\t\t\t\t\tonChange={ ( text ) => this.setState( { message: text } ) }\n\t\t\t\t\t\t\t\t\t\t\t\tplaceholder={ __( 'Utilisez cette zone pour rédiger votre message', 'reception' ) }\n\t\t\t\t\t\t\t\t\t\t\t\tmultiline={ true }\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\tisPrimary={ true }\n\t\t\t\t\t\t\t\t\t\tonClick={ ( e ) => this.sendEmail( e ) }\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{ modalAction }\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t{ true === needsValidation && (\n\t\t\t\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t\t\t\t<TextControl\n\t\t\t\t\t\t\t\t\t\tlabel={ __( 'Code de validation', 'reception') }\n\t\t\t\t\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\t\t\t\t\tvalue={ confirmationCode }\n\t\t\t\t\t\t\t\t\t\tonChange={ ( code ) => this.setState( { confirmationCode: code } ) }\n\t\t\t\t\t\t\t\t\t\trequired={ true }\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\tisPrimary={ true }\n\t\t\t\t\t\t\t\t\t\tonClick={ ( e ) => this.checkValidationCode( e ) }\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{ __( 'Lancer la vérification', 'reception' ) }\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tonClick={ () => this.closeEmailEditor() }\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{ labelCancelButton }\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Modal>\n\t\t\t\t) }\n\t\t\t</Fragment>\n\t\t);\n\t}\n}\n\nrender( <MemberContactForm />, document.querySelector( '.reception-member-contact-form-content' ) );\n"]}